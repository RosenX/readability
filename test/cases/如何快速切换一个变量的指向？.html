<html><head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>
å¦‚ä½•å¿«é€Ÿåˆ‡æ¢ä¸€ä¸ªå˜é‡çš„æŒ‡å‘ï¼Ÿ - Rustè¯­è¨€ä¸­æ–‡ç¤¾åŒº
</title>
    <!--    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>-->
    <link rel="stylesheet" type="text/css" href="/css/base.css">
</head>
<body>
<div id="header">
    <div class="header">
    <div class="logo left">
        <a href="/">
		<img class="left" src="/img/rust-logo.svg">
		<div class="logo-title left">Rustè¯­è¨€ä¸­æ–‡ç¤¾åŒº</div>
		<div style="clear:both;"></div>
        </a>
        <div style="clear:both;"></div>
    </div>

    <div class="signpart right">
        <a href="/search">Search</a> &nbsp;
        <a href="/rss">RSS</a> &nbsp;
        <a href="/account">å¸æˆ·</a>
	</div>
	<div style="clear:both;"></div>
</div>

</div>
<div id="content">
    
<!--<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.12.0/build/styles/default.min.css">-->
<link rel="stylesheet" href="/css/gruvbox-light.css">
<script src="https://hm.baidu.com/hm.js?1fd834970f3ad2bab2cb57d4aa2b2e5a"></script><script src="/js/jquery.min.js"></script>
<script src="/js/highlight.pack.js"></script>

<div class="body-content article_detail detail">
    <div class="article_detail_head">
	
	    <a href="/section?id=498bfc50-3707-406f-b7ca-ede9cbf8808d" class="return">&lt; è¿”å›ç‰ˆå—</a>
	
	<div class="title">
	    <h2><a href="/article?id=886ae16f-3d69-403a-a683-f01eca4cdc0c">å¦‚ä½•å¿«é€Ÿåˆ‡æ¢ä¸€ä¸ªå˜é‡çš„æŒ‡å‘ï¼Ÿ</a></h2>
	</div>
	<p class="vice-title">
	    <a href="/blog_with_author?author_id=00b8aadd-6c3c-47e4-973d-12337e273e14">lovelock</a>

	    å‘è¡¨äº <span class="article_created_time">2023-06-15 11:26</span>

	    
	</p>
	<p>
	    
	    <small>Tagsï¼šæŒ‡é’ˆ</small>
	    
	</p>
    </div>

    <div class="detail-body ">
	<p>æˆ‘æœ‰è¿™æ ·ä¸€ä¸ªå¤šçº¿ç¨‹è¯»ï¼Œå•çº¿ç¨‹å†™çš„åœºæ™¯ï¼Œä½¿ç”¨äº†RWLockï¼ˆæ ‡å‡†åº“çš„å’Œparking_lotéƒ½è¯•è¿‡ï¼Œæ•ˆæœå·®ä¸å¤šï¼Œè¿™ä¸æ˜¯é‡ç‚¹ï¼‰ã€‚</p>
<pre><code class="hljs javascript">let state = Arc::new(RwLock::new(MyStruct::new()));

</code></pre>
<p>å½“notifyç›‘å¬åˆ°æ–‡ä»¶å˜åŒ–æ—¶ï¼Œé‡æ–°åˆå§‹åŒ–ä¸€ä¸ª<code>MyStruct</code>ï¼Œç„¶åé‡æ–°èµ‹å€¼ç»™æ­£åœ¨è¢«å…¶ä»–çº¿ç¨‹å…±äº«çš„è¿™ä¸ª</p>
<pre><code class="hljs javascript">let new_state = MyStruct::new();

*state.write() = new_state;

</code></pre>
<p>è¿™ä¸ª<code>MyStruct</code>å…¶å®æ˜¯ç›¸å½“å¤æ‚çš„ä¸€ä¸ªç»“æ„ï¼Œæˆ‘è§‚æµ‹å‘ç°<code>*state.write() = new_state;</code>è¿™è¡Œä»£ç ä¼šæ‰§è¡Œ500å¤šmsï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­å¥åº”è¯¥æ˜¯æŠŠæ–°å¯¹è±¡çš„å†…å­˜å¤åˆ¶åˆ°è¿™ä¸ªå˜é‡ä¸­å»äº†ï¼Œæˆ‘åœ¨æƒ³æœ‰æ²¡æœ‰åŠæ³•æ”¹æˆå¼•ç”¨çš„æ–¹å¼ï¼Œåªæ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘è€Œä¸æ‹·è´å†…å­˜ï¼Ÿ</p>
<p>å¦å¤–ä¸€ä¸ªå»¶ä¼¸çš„é—®é¢˜æ˜¯ï¼Œæ–‡ä»¶æ”¹å˜ä¸€æ¬¡ï¼Œä½†notifyä¼šç›‘å¬åˆ°ä¸¤æ¬¡äº‹ä»¶ã€‚ã€‚ã€‚</p>
<p>å¸Œæœ›æœ‰å¤§ç¥å¯ä»¥å¸®å¿™æŒ‡ç‚¹è¿·æ´¥ï¼Œå¤šè°¢ï¼ï¼ï¼</p>

    </div>

    

    <div class="comments">
	<div class="">
	    <h3 class="left">è¯„è®ºåŒº</h3>
	    <a class="right new-comment" href="/p/comment/new?article_id=886ae16f-3d69-403a-a683-f01eca4cdc0c">å†™è¯„è®º</a>
	    <div style="clear:both;"></div>
	</div>

	
	    
	    <div class="item">
		<div class="comment-title">
		    
		    <a class="author-name" href="/blog_with_author?author_id=45bf0706-4dee-4414-9330-69ab4ed15ab0">
			DDD
		    </a>
		    <span class="created-time">2023-06-15 15:05</span>
		    
		    
		</div>
		<div class="comment-content">
		    <p>Mutexé‡Œé¢å†åŒ…ä¸€ä¸ªBox?</p>

		</div>
	    </div>
	    
	    <div class="item">
		<div class="comment-title">
		    
		    <a class="author-name" href="/blog_with_author?author_id=bab6d85c-e541-49a2-b904-75d32fa78333">
			mllcms
		    </a>
		    <span class="created-time">2023-06-15 12:55</span>
		    
		    
		</div>
		<div class="comment-content">
		    <p>notifyä¼šç›‘å¬åˆ°ä¸¤æ¬¡äº‹ä»¶è¿™ä¸ªé—®é¢˜æˆ‘æœ€è¿‘ä¹Ÿé‡åˆ°è¿‡ï¼Œæˆ‘ç”¨çš„ä¸¤ä¸ª channel åšé˜²æŠ–</p>

		</div>
	    </div>
	    
	    <div class="item">
		<div class="comment-title">
		    
		    <a class="author-name" href="/blog_with_author?author_id=35236522-eee7-4009-99fe-5419b136b094">
			Bai-Jinlin
		    </a>
		    <span class="created-time">2023-06-15 12:52</span>
		    
		    
		</div>
		<div class="comment-content">
		    <p>é‚£ä½ ææˆé™æ€å…¨å±€å˜é‡ä¸å°±å¥½äº†ï¼Œä½ éè¦with_stateèµ°extractoråˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢</p>
<p>--<br>
ğŸ‘‡<br>
lovelock: è¿™ä¸ªæˆ‘ä¹‹å‰å°è¯•è¿‡ï¼Œä½†å®ƒä¸æ”¯æŒ<code>Clone</code>ï¼Œæˆ‘è¿™ä¸ªæ˜¯éœ€è¦ä¸€ç»„çº¿ç¨‹ç”¨å®ƒçš„è¯»å®ä¾‹ï¼Œä¸€ä¸ªçº¿ç¨‹ç”¨å®ƒçš„å†™å®ä¾‹ï¼Œè€Œä¸”æ˜¯è¦ä¼ å¦‚axumçš„handleré‡Œçš„ï¼Œå®ƒé™åˆ¶äº†å¿…é¡»è¦æœ‰<code>Clone</code></p>
<p>https://docs.rs/arc-swap/latest/arc_swap/docs/limitations/index.html#no-clone-implementation</p>
<p>--<br>
ğŸ‘‡<br>
Bai-Jinlin: https://docs.rs/arc-swap/</p>

		</div>
	    </div>
	    
	    <div class="item">
		<div class="comment-title">
		    
		    ä½œè€…
		    
		    <a class="author-name" href="/blog_with_author?author_id=00b8aadd-6c3c-47e4-973d-12337e273e14">
			lovelock
		    </a>
		    <span class="created-time">2023-06-15 12:31</span>
		    
		    
		</div>
		<div class="comment-content">
		    <p>è¿™ä¸ªæˆ‘ä¹‹å‰å°è¯•è¿‡ï¼Œä½†å®ƒä¸æ”¯æŒ<code>Clone</code>ï¼Œæˆ‘è¿™ä¸ªæ˜¯éœ€è¦ä¸€ç»„çº¿ç¨‹ç”¨å®ƒçš„è¯»å®ä¾‹ï¼Œä¸€ä¸ªçº¿ç¨‹ç”¨å®ƒçš„å†™å®ä¾‹ï¼Œè€Œä¸”æ˜¯è¦ä¼ å¦‚axumçš„handleré‡Œçš„ï¼Œå®ƒé™åˆ¶äº†å¿…é¡»è¦æœ‰<code>Clone</code></p>
<p>https://docs.rs/arc-swap/latest/arc_swap/docs/limitations/index.html#no-clone-implementation</p>
<p>--<br>
ğŸ‘‡<br>
Bai-Jinlin: https://docs.rs/arc-swap/</p>

		</div>
	    </div>
	    
	    <div class="item">
		<div class="comment-title">
		    
		    <a class="author-name" href="/blog_with_author?author_id=35236522-eee7-4009-99fe-5419b136b094">
			Bai-Jinlin
		    </a>
		    <span class="created-time">2023-06-15 12:16</span>
		    
		    
		</div>
		<div class="comment-content">
		    <p>https://docs.rs/arc-swap/</p>

		</div>
	    </div>
	    
	
    </div>

    <div class="comment_paginator_part">
	<div class="comment_paginator right">
	    
	    <a href="/article?id=886ae16f-3d69-403a-a683-f01eca4cdc0c&amp;current_page=1" class="current_page">
		1
	    </a>
	    
	    å…± 5 æ¡è¯„è®º, 1 é¡µ
	</div>
	<div style="clear:both;"></div>
    </div>
</div>

<script type="application/javascript">
    function hightlight($doms) {
	$doms.each(function (i, block) {
	    hljs.highlightBlock(block);
	});
    }

    hightlight($("pre code"));
</script>

</div>
<div id="footer">
    <div class="footer">
    <div class="site-desc">
	<p class="links">
		å‹æƒ…é“¾æ¥ï¼š
			<a target="_blank" href="http://tinylab.org/">æ³°æ™“ç§‘æŠ€</a>
			| <a target="_blank" href="https://ruby-china.org/">Ruby China</a>
			| <a target="_blank" href="https://eleduck.com/">ç”µé¸­è¿œç¨‹ç¤¾åŒº</a>
			| <a target="_blank" href="http://ipfs.cn/">IPFSä¸­æ–‡ç¤¾åŒº</a>
	</p>
	<p class="links">
	    <a href="/acknowledgement">é¸£è°¢ï¼š</a>
	    <a href="/acknowledgement">è¿…è¾¾äº‘</a>
	    <a href="/acknowledgement">èµ›è´</a>
	    <a href="/acknowledgement">LongHash</a>
	</p>
	    <p> Â©2016~2020 Rust.cc ç‰ˆæƒæ‰€æœ‰ &nbsp;&nbsp;
	    <span class="powered">Powered by
		<a href="https://github.com/daogangtang/forustm">Forustm</a> &amp;
		<a href="https://github.com/daogangtang/rusoda">Rusoda</a> &amp;
		<a href="https://github.com/sappworks/sapper">Sapper</a>
	    </span>
	</p>
		<p>
        <span><a href="https://beian.miit.gov.cn">èœ€ICPå¤‡20010673å·-1</a></span>
		</p>

    </div>
</div>

<script>
var _hmt = _hmt || [];
(function() {
 var hm = document.createElement("script");
 hm.src = "https://hm.baidu.com/hm.js?1fd834970f3ad2bab2cb57d4aa2b2e5a";
 var s = document.getElementsByTagName("script")[0]; 
 s.parentNode.insertBefore(hm, s);
 })();
</script>

</div>




</body></html>